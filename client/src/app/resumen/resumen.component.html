<div class="page">
  <div class="head">
    <div>
      <h2>Resumen (Admin)</h2>
      <p class="sub">Ventas agregadas por rango</p>
    </div>

    <div class="filters">
      <label>
        Desde
        <input type="date" [(ngModel)]="from" />
      </label>

      <label>
        Hasta
        <input type="date" [(ngModel)]="to" />
      </label>

      <button (click)="cargar()" [disabled]="cargando()">Actualizar</button>
    </div>
  </div>

  <div class="loading" *ngIf="cargando()">Cargando...</div>

  <ng-container *ngIf="data() as d">
    <section class="cards">
      <div class="card">
        <div class="k">Total facturado</div>
        <div class="v">$ {{ d.totalFacturado }}</div>
        <div class="s">solo confirmadas</div>
      </div>

      <div class="card">
        <div class="k">Ventas confirmadas</div>
        <div class="v">{{ d.cantidadConfirmadas }}</div>
        <div class="s">en el rango</div>
      </div>

      <div class="card">
        <div class="k">Ventas anuladas</div>
        <div class="v">{{ d.cantidadAnuladas }}</div>
        <div class="s">en el rango</div>
      </div>
    </section>

    <section class="grid">
      <div class="panel">
        <div class="panel-title">Total por d√≠a</div>
        <canvas id="chartDia"></canvas>
      </div>

      <div class="panel">
        <div class="panel-title">Medios de pago</div>
        <canvas id="chartPago"></canvas>
      </div>

      <div class="panel full">
        <div class="panel-title">Top productos (por total vendido)</div>
        <canvas id="chartTop"></canvas>
      </div>
    </section>
  </ng-container>
</div>
