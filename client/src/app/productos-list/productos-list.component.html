<div class="header">
  <h2>Productos</h2>
  <a routerLink="/app/productos/nuevo">+ Nuevo</a>
</div>

<div class="filters">
  <input [formControl]="q" placeholder="Buscar (q)..." />
  <select [formControl]="categoria">
    <option value="">Todas</option>
    <option value="helado">Helado</option>
    <option value="bebida">Bebida</option>
    <option value="comida">Comida</option>
  </select>
  <label>
    <input type="checkbox" [formControl]="verInactivos" />
    Ver inactivos
  </label>
  <button (click)="cargar()">Buscar</button>
</div>

<table *ngIf="productos().length > 0; else empty">
  <thead>
    <tr>
      <th>Nombre</th>
      <th>Categoría</th>
      <th>Unidad</th>
      <th>Precio</th>
      <th>Stock</th>
      <th>Activo</th>
      <th></th>
    </tr>
  </thead>

  <tbody>
    <tr *ngFor="let p of productos()">
      <td>{{ p.nombre }}</td>
      <td>{{ p.categoria }}</td>
      <td>{{ p.unidad }}</td>
      <td>{{ p.precioVenta ?? "-" }}</td>
      <td>{{ p.stockActual ?? "-" }}</td>
      <td>{{ p.activo ? "Sí" : "No" }}</td>
      <td class="actions">
        <a [routerLink]="['/productos', p._id, 'editar']">Editar</a>
        <button (click)="desactivar(p)" [disabled]="!p.activo">
          Desactivar
        </button>
      </td>
    </tr>
  </tbody>
</table>

<ng-template #empty>
  <p>No hay productos para mostrar.</p>
</ng-template>
